<% line_length = scope.lookupvar('motd::news_line_length') -%>
* <%= @date %> - <%= @newstitle %>
<% if @message -%>
<% if scope.function_is_array([@message]) -%>
<% @message.each do |msg| -%>
* <%= msg %>
<% end -%>
<% else -%>
* <%= @message.scan(/\S.{0,#{line_length}}\S(?=\s|$)|\S+/).join("\n* ") %>
<% end -%>
<% end -%>
